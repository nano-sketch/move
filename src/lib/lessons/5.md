---
title: "File Handling"
lesson: 5
quizzes:
  - question: "Which mode opens a file for reading?"
    options:
      - "'w'"
      - "'r'"
      - "'a'"
      - "'x'"
    correct: 1
  - question: "What happens when you open a file in 'w' mode?"
    options:
      - "Appends to the end"
      - "Reads the file"
      - "Overwrites the entire file"
      - "Creates a copy"
    correct: 2
  - question: "Which method reads the entire file as a string?"
    options:
      - "file.read()"
      - "file.readall()"
      - "file.get()"
      - "file.content()"
    correct: 0
  - question: "What is the benefit of using 'with' statement?"
    options:
      - "Faster file access"
      - "Automatically closes the file"
      - "Better error messages"
      - "Allows multiple files"
    correct: 1
---

# File Handling

File handling allows your programs to read from and write to files on your computer. This is essential for saving data, processing text files, and working with external data.

## Opening Files

Use the `open()` function to open a file:

```python
file = open("example.txt", "r")
content = file.read()
file.close()
```

## File Modes

Different modes for different operations:

### Read Mode ('r')

Opens file for reading (default mode):

```python
file = open("data.txt", "r")
content = file.read()
file.close()
```

### Write Mode ('w')

Creates new file or overwrites existing:

```python
file = open("output.txt", "w")
file.write("Hello World")
file.close()
```

### Append Mode ('a')

Adds content to end of file:

```python
file = open("log.txt", "a")
file.write("New log entry\n")
file.close()
```

### Create Mode ('x')

Creates new file, fails if exists:

```python
file = open("newfile.txt", "x")
file.write("Content")
file.close()
```

## The 'with' Statement

Best practice for file handling:

```python
with open("file.txt", "r") as file:
    content = file.read()
    print(content)
```

The file automatically closes when the block ends.

## Reading Files

### Read Entire File

```python
with open("data.txt", "r") as file:
    content = file.read()
    print(content)
```

### Read Line by Line

```python
with open("data.txt", "r") as file:
    for line in file:
        print(line.strip())
```

### Read All Lines as List

```python
with open("data.txt", "r") as file:
    lines = file.readlines()
    print(lines)
```

### Read Single Line

```python
with open("data.txt", "r") as file:
    first_line = file.readline()
    second_line = file.readline()
```

### Read Specific Number of Characters

```python
with open("data.txt", "r") as file:
    chunk = file.read(10)
    print(chunk)
```

## Writing Files

### Write String

```python
with open("output.txt", "w") as file:
    file.write("Hello World\n")
    file.write("Second line\n")
```

### Write Multiple Lines

```python
lines = ["Line 1\n", "Line 2\n", "Line 3\n"]
with open("output.txt", "w") as file:
    file.writelines(lines)
```

### Append to File

```python
with open("log.txt", "a") as file:
    file.write("New entry\n")
```

## File Positions

### Get Current Position

```python
with open("data.txt", "r") as file:
    print(file.tell())
    file.read(5)
    print(file.tell())
```

### Move to Position

```python
with open("data.txt", "r") as file:
    file.seek(0)
    content = file.read()
```

## Checking Files

### Check if File Exists

```python
import os

if os.path.exists("file.txt"):
    print("File exists")
else:
    print("File not found")
```

### Check if Path is File

```python
import os

if os.path.isfile("data.txt"):
    print("It's a file")
```

### Get File Size

```python
import os

size = os.path.getsize("file.txt")
print(f"Size: {size} bytes")
```

## Working with Paths

### Join Paths

```python
import os

path = os.path.join("folder", "subfolder", "file.txt")
print(path)
```

### Get Absolute Path

```python
import os

abs_path = os.path.abspath("file.txt")
print(abs_path)
```

### Split Path

```python
import os

directory, filename = os.path.split("/path/to/file.txt")
print(directory)
print(filename)
```

## Deleting Files

```python
import os

if os.path.exists("temp.txt"):
    os.remove("temp.txt")
    print("File deleted")
```

## Renaming Files

```python
import os

os.rename("old_name.txt", "new_name.txt")
```

## Working with Directories

### Create Directory

```python
import os

os.mkdir("new_folder")
```

### Remove Directory

```python
import os

os.rmdir("folder_name")
```

### List Directory Contents

```python
import os

files = os.listdir(".")
for file in files:
    print(file)
```

## Binary Files

### Read Binary

```python
with open("image.png", "rb") as file:
    data = file.read()
```

### Write Binary

```python
with open("copy.png", "wb") as file:
    file.write(data)
```

## Error Handling

Always handle file errors:

```python
try:
    with open("file.txt", "r") as file:
        content = file.read()
except FileNotFoundError:
    print("File not found")
except PermissionError:
    print("Permission denied")
except Exception as e:
    print(f"Error: {e}")
```

## Common Patterns

### Copy File

```python
with open("source.txt", "r") as source:
    with open("destination.txt", "w") as dest:
        dest.write(source.read())
```

### Count Lines

```python
with open("data.txt", "r") as file:
    line_count = len(file.readlines())
    print(f"Lines: {line_count}")
```

### Search in File

```python
with open("data.txt", "r") as file:
    for line in file:
        if "search_term" in line:
            print(line.strip())
```

### Process CSV-like Data

```python
with open("data.csv", "r") as file:
    for line in file:
        values = line.strip().split(",")
        print(values)
```

## Common Mistakes

**Forgetting to close files:**
```python
file = open("data.txt", "r")
content = file.read()
```

**Wrong mode:**
```python
with open("data.txt", "w") as file:
    content = file.read()
```

**Not handling errors:**
```python
with open("nonexistent.txt", "r") as file:
    content = file.read()
```

## Practice Challenges

Try these exercises:

1. Create a file and write your name to it
2. Read a file and print each line
3. Count the number of words in a file
4. Copy contents from one file to another
5. Append today's date to a log file

## Key Points

- Use `open()` to work with files
- Always close files or use `with` statement
- Modes: 'r' (read), 'w' (write), 'a' (append), 'x' (create)
- `read()` reads entire file, `readline()` reads one line
- `write()` writes strings to files
- Always handle file errors with try-except
- Use `os` module for file operations
- Binary mode: 'rb' or 'wb' for non-text files

File handling is crucial for building real-world applications that need to persist data beyond program execution.
