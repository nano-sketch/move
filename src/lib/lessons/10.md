---
title: "Input Validation"
lesson: 10
quizzes:
  - question: "Which function checks if a string contains only digits?"
    options:
      - "str.isnumeric()"
      - "str.isdigit()"
      - "str.isint()"
      - "Both A and B"
    correct: 3
  - question: "How do you check if a string is not empty?"
    options:
      - "if str:"
      - "if len(str) > 0:"
      - "if str != '':"
      - "All of the above"
    correct: 3
  - question: "Which method removes whitespace from both ends?"
    options:
      - "str.remove()"
      - "str.trim()"
      - "str.strip()"
      - "str.clean()"
    correct: 2
  - question: "What does str.isalpha() check?"
    options:
      - "Only letters"
      - "Letters and numbers"
      - "Any characters"
      - "Uppercase letters"
    correct: 0
---

# Input Validation

Input validation ensures that data meets specific requirements before processing. It's crucial for security, data integrity, and preventing errors in your applications.

## Why Validate Input?

Validation prevents:
- Invalid data from corrupting your program
- Security vulnerabilities
- Runtime errors
- Poor user experience

## Basic String Validation

```python
def is_not_empty(text):
    return bool(text and text.strip())

def is_valid_length(text, min_len, max_len):
    return min_len <= len(text) <= max_len

print(is_not_empty("Hello"))
print(is_valid_length("Hello", 3, 10))
```

## String Type Checks

```python
print("Hello".isalpha())
print("Hello123".isalpha())
print("12345".isdigit())
print("Hello123".isalnum())
print("hello".islower())
print("HELLO".isupper())
print("Hello World".istitle())
print("   ".isspace())
```

## Number Validation

```python
def is_valid_integer(value):
    try:
        int(value)
        return True
    except ValueError:
        return False

def is_in_range(value, min_val, max_val):
    try:
        return min_val <= float(value) <= max_val
    except ValueError:
        return False

print(is_valid_integer("123"))
print(is_in_range("50", 0, 100))
```

## Email Validation

```python
import re

def is_valid_email(email):
    pattern = r"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
    return bool(re.match(pattern, email))

print(is_valid_email("user@example.com"))
print(is_valid_email("invalid.email"))
```

## Password Validation

```python
def is_strong_password(password):
    if len(password) < 8:
        return False
    has_upper = any(c.isupper() for c in password)
    has_lower = any(c.islower() for c in password)
    has_digit = any(c.isdigit() for c in password)
    return has_upper and has_lower and has_digit

print(is_strong_password("Weak"))
print(is_strong_password("Strong123"))
```

## Phone Number Validation

```python
import re

def is_valid_phone(phone):
    pattern = r"^\d{3}-\d{3}-\d{4}$"
    return bool(re.match(pattern, phone))

print(is_valid_phone("555-123-4567"))
print(is_valid_phone("5551234567"))
```

## URL Validation

```python
import re

def is_valid_url(url):
    pattern = r"^https?://[\w.-]+\.[a-zA-Z]{2,}(/.*)?$"
    return bool(re.match(pattern, url))

print(is_valid_url("https://example.com"))
print(is_valid_url("not-a-url"))
```

## Date Validation

```python
from datetime import datetime

def is_valid_date(date_str, format="%Y-%m-%d"):
    try:
        datetime.strptime(date_str, format)
        return True
    except ValueError:
        return False

print(is_valid_date("2025-01-15"))
print(is_valid_date("2025-13-01"))
```

## Username Validation

```python
def is_valid_username(username):
    if not username:
        return False
    if len(username) < 3 or len(username) > 20:
        return False
    if not username[0].isalpha():
        return False
    if not all(c.isalnum() or c == "_" for c in username):
        return False
    return True

print(is_valid_username("user_123"))
print(is_valid_username("1user"))
print(is_valid_username("us"))
```

## Credit Card Validation

### Luhn Algorithm

```python
def is_valid_credit_card(card_number):
    digits = [int(d) for d in str(card_number) if d.isdigit()]
    
    if len(digits) != 16:
        return False
    
    checksum = 0
    for i, digit in enumerate(reversed(digits)):
        if i % 2 == 1:
            digit *= 2
            if digit > 9:
                digit -= 9
        checksum += digit
    
    return checksum % 10 == 0

print(is_valid_credit_card("4532015112830366"))
print(is_valid_credit_card("1234567890123456"))
```

## Sanitizing Input

```python
import re

def sanitize_input(text):
    return text.strip()

def remove_special_chars(text):
    return re.sub(r"[^a-zA-Z0-9\s]", "", text)

print(sanitize_input("  hello  "))
print(remove_special_chars("Hello, World!"))
```

## File Upload Validation

```python
def is_valid_file_extension(filename, allowed_extensions):
    return any(filename.lower().endswith(ext) for ext in allowed_extensions)

def is_valid_file_size(file_size, max_size_mb):
    return file_size <= max_size_mb * 1024 * 1024

allowed = [".jpg", ".png", ".gif"]
print(is_valid_file_extension("image.jpg", allowed))
print(is_valid_file_size(1048576, 2))
```

## Form Validation

```python
class FormValidator:
    def __init__(self):
        self.errors = []
    
    def validate_required(self, value, field_name):
        if not value or not value.strip():
            self.errors.append(f"{field_name} is required")
    
    def is_valid(self):
        return len(self.errors) == 0

validator = FormValidator()
validator.validate_required("", "Username")
print(f"Valid: {validator.is_valid()}")
```

## Common Patterns

### Safe Integer Input

```python
def get_integer_input(prompt, min_val=None, max_val=None):
    while True:
        try:
            value = int(input(prompt))
            if min_val is not None and value < min_val:
                print(f"Must be at least {min_val}")
                continue
            if max_val is not None and value > max_val:
                print(f"Must be at most {max_val}")
                continue
            return value
        except ValueError:
            print("Please enter a valid integer")
```

### Validate and Convert

```python
def validate_and_convert(value, data_type, default=None):
    try:
        return data_type(value)
    except (ValueError, TypeError):
        return default

result = validate_and_convert("123", int, 0)
print(result)
```

## Common Mistakes

**Not trimming input:**
```python
if username == "admin":
    pass
```

**Trusting client-side validation:**
```python
def process_data(data):
    save_to_database(data)
```

**Not validating all inputs:**
```python
age = int(input("Age: "))
```

## Practice Challenges

Try these exercises:

1. Create a function to validate a postal code
2. Write a validator for social security numbers
3. Implement a function to check if a string is a valid IPv4 address
4. Create a password strength meter
5. Build a complete registration form validator

## Key Points

- Always validate user input
- Use built-in string methods: `isdigit()`, `isalpha()`, `isalnum()`
- Sanitize input by removing/escaping dangerous characters
- Validate both format and content
- Provide clear error messages
- Use regex for complex patterns
- Never trust client-side validation alone
- Validate length, type, and range
- Handle validation errors gracefully
- Test validation with edge cases

Input validation is your first line of defense against bad data and security vulnerabilities. Never skip it in production code.
